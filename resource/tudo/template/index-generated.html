<!DOCTYPE html>
<html$if(lang)$ lang="$lang$" $endif$$if(dir)$ dir="$dir$" $endif$>

  <head>
    <meta charset="utf-8">
    <meta name="generator" content="pandoc">

    <!-- PWA Kram -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-touch-fullscreen" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="apple-touch-icon" href="$decker-support-dir$/pwa/icon.png">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="theme-color" content="#84b819" />
    <link rel="manifest" href="$decker-support-dir$/pwa/manifest.webmanifest" crossorigin="use-credentials" />

    <script type="module">
      /* Store JSON encoded Pandoc meta data in a global variable. */
      import initializeDecker from "./$decker-support-dir$/js/decker.js";
      initializeDecker("$decker-meta-url$");
    </script>

$for(author-meta)$
    <meta name="author" content="$author-meta$">
$endfor$
$if(date-meta)$
    <meta name="dcterms.date" content="$date-meta$">
$endif$
$if(template.favicon)$
    <link rel="shortcut icon" href="$template.favicon$">
$endif$
    <title>$if(title-prefix)$$title-prefix$ – $endif$Decker: Inhaltsverzeichnis</title>

    
    <!-- style sheets ------------------------------------------------------->

    <link rel="stylesheet" href="$decker-support-dir$/css/variables.css">

    <style class="css-declarations">
      :root {
        $for(css-light-color-declarations)$
          $css-light-color-declarations$
        $endfor$
      }
      :root.dark {
        $for(css-dark-color-declarations)$
          $css-dark-color-declarations$
        $endfor$
      }
      :root {
        $for(css-declarations)$
          $css-declarations$
        $endfor$
      }
    </style>
    <style>
      $style.html()$
    </style>

    <link rel="stylesheet" href="$decker-support-dir$/css/index.css">
    <link rel="stylesheet" href="$decker-support-dir$/css/tudo-index.css">
    $if(template.font)$
    <link rel="stylesheet" href="$decker-support-dir$/fonts/$template.font$.css">
    $else$
    <link rel="stylesheet" href="$decker-support-dir$/fonts/lato.css">
    $endif$
    $for(template.index.css)$
    <link rel="stylesheet" href="$template.index.css$">
    $endfor$

  </head>

  <!-- main content ------------------------------------------------------->
  <body class="index" onload="initIndexPage()">
    $for(include-before)$
    $include-before$
    $endfor$

    <!-- page header -->
    <header>
    $if(template.index-page.banner)$
    <div class="index-page-banner">
       <img src=$template.index-page.banner$>
    </div>
    $endif$
    $if(title)$
      <h1>Inhaltsverzeichnis</h1>
    $endif$
    <button id="index-color-button"></button>
    </header>

    <!-- main content -->
    <main class="content">

      $manual.html()$

      <div id="index-search"></div>
      <script type="module">
        import setupSearch from "/$decker-support-dir$/fuzzySearch/search.js";
        window.addEventListener("load", () => {
          let searchBox = document.getElementById("index-search");
          setupSearch(searchBox, 0.5);
        });
      </script>

      <div class="english">
        <section data-items="$decks.by-title/length$"">
          <h2>
            Slide Decks
          </h2>
          <table>
            <thead>
              <tr>
                <th>Title</th>
                <th>Material</th>
              </tr>
            </thead>
            <tbody>
              $for(decks.by-title/pairs)$
              <tr>
                <td>$if(it.value.title)$$it.value.title$$else$Unknown Title$endif$$if(it.value.subtitle)$ &mdash; $it.value.subtitle$$endif$</td>
                <td><span class="icons"><a title="Access slide $it.value.title$" href="$it.value.url$"><i class="fa-brands fa-html5"></i></a></span></td>
              </tr>
              $endfor$
            </tbody>
          </table>
        </section>

        <section data-items="$pages.by-title/length$"">
          <h2>Additional Material</h2>
          <table>
            <thead>
              <tr>
                <th>Material</th>
              </tr>
            </thead>
            <tbody>
              $for(pages.by-title/pairs)$
              <tr>
                <td><a href="$it.value.url$">$if(it.value.title)$Material: $it.value.title$$else$Unknown Title$endif$$if(it.value.subtitle)$ &mdash; $it.value.subtitle$$endif$</a></td>
              </tr>
              $endfor$
            </tbody>
          </table>
        </section>
      </div>
      <div class="german">
        <section data-items="$decks.by-title/length$"">
          <h2>
            Foliensätze
          </h2>
          <table>
            <thead>
              <tr>
                <th>Titel</th>
                <th>Material</th>
              </tr>
            </thead>
            <tbody>
              $for(decks.by-title/pairs)$
              <tr>
                <td>$if(it.value.title)$$it.value.title$$else$Unbekannter Titel$endif$$if(it.value.subtitle)$ &mdash; $it.value.subtitle$$endif$</td>
                <td><span class="icons"><a title="Foliensatz zu $it.value.title$ öffnen" href="$it.value.url$"><i class="fa-brands fa-html5"></i></a></span></td>
              </tr>
              $endfor$
            </tbody>
          </table>
        </section>

        <section data-items="$pages.by-title/length$"">
          <h2>Zusatzmaterial</h2>
          <table>
            <thead>
              <tr>
                <th>Material</th>
              </tr>
            </thead>
            <tbody>
              $for(pages.by-title/pairs)$
              <tr>
                <td><a href="$it.value.url$">$if(it.value.title)$Material: $it.value.title$$else$Unbekannter Titel$endif$$if(it.value.subtitle)$ &mdash; $it.value.subtitle$$endif$</a></td>
              </tr>
              $endfor$
            </tbody>
          </table>
        </section>
      </div>
    </main>

    <!-- footer with author information -->
    <footer>
      <p>
        $if(copyright)$ $copyright$ $endif$ 
        $if(author)$ $author$;&ensp; $endif$
        $if(affiliation)$ $affiliation$;&ensp; $endif$
        $if(date)$ $date$ $endif$
      </p>
    </footer>
  </body>


  <!-- javascript scripts ------------------------------------------------->

  <script src="$decker-support-dir$/js/index.js"></script>
  <script type="module">
    import * as colorScheme from "./$decker-support-dir$/js/color-scheme.js";
    const colorButton = document.getElementById("index-color-button");
    colorButton.addEventListener("click", colorScheme.toggleColor);
    colorButton.title = navigator.language === "de" ? "Farbmodus umschalten" : "Switch Colormode";
    colorButton.ariaLabel = navigator.language === "de" ? "Farbmodus umschalten" : "Switch Colormode";
  </script>
  <script type="module" src="$decker-support-dir$/js/page-math.js"></script>

  $for(template.page.js)$
  <script src="$template.page.js$"></script>
  $endfor$
  $for(template.page.js-module)$
  <script type="module" src="$template.page.js-module$"></script>
  $endfor$

  <script>
    var socket = new WebSocket("ws://" + location.host + "/reload");
    socket.onmessage = function (event) {
      if (event.data.startsWith("reload!")) 
        window.location.reload(true);
    };
  </script>

</html>
