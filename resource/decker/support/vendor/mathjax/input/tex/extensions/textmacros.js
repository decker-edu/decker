(()=>{"use strict";var t={d:(e,a)=>{for(var o in a)t.o(a,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:a[o]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};t.r(e),t.d(e,{TextParser:()=>y});var a={};t.r(a),t.d(a,{TextMacrosMethods:()=>L});var o={};t.r(o),t.d(o,{TextBaseConfiguration:()=>B,TextMacrosConfiguration:()=>Q});const s=("undefined"!=typeof window?window:global).MathJax._.components.global,r=(s.GLOBAL,s.isObject,s.combineConfig,s.combineDefaults,s.combineWithMathJax),n=(s.MathJax,MathJax._.input.tex.HandlerTypes),i=n.ConfigurationType,c=n.HandlerType,l=MathJax._.input.tex.Configuration,h=l.Configuration,p=(l.ConfigurationHandler,l.ParserConfiguration),m=MathJax._.input.tex.ParseOptions.default,u=MathJax._.input.tex.Tags,d=(u.Label,u.TagInfo,u.AbstractTags,u.NoTags,u.AllTags,u.TagsFactory),x=MathJax._.input.tex.base.BaseItems,g=x.StartItem,M=x.StopItem,S=(x.OpenItem,x.CloseItem,x.NullItem,x.PrimeItem,x.SubsupItem,x.OverItem,x.LeftItem,x.Middle,x.RightItem,x.BreakItem,x.BeginItem,x.EndItem,x.StyleItem),f=(x.PositionItem,x.CellItem,x.MmlItem),A=(x.FnItem,x.NotItem,x.NonscriptItem,x.DotsItem,x.ArrayItem,x.EqnArrayItem,x.MstyleItem,x.EquationItem,MathJax._.input.tex.TexParser.default),k=MathJax._.input.tex.TexError.default,T=MathJax._.input.tex.ParseUtil,b=(T.KeyValueType,T.KeyValueTypes,T.ParseUtil),v=MathJax._.core.MmlTree.MmlNode,P=(v.TEXCLASS,v.TEXCLASSNAMES,v.MATHVARIANTS,v.indentAttributes,v.AbstractMmlNode),C=(v.AbstractMmlTokenNode,v.AbstractMmlLayoutNode,v.AbstractMmlBaseNode,v.AbstractMmlEmptyNode,v.TextNode,v.XMLNode,MathJax._.input.tex.NodeUtil.default);class y extends A{get texParser(){return this.configuration.packageData.get("textmacros").texParser}get tags(){return this.texParser.tags}constructor(t,e,a,o){super(t,e,a),this.level=o}mml(){return this.copyLists(),this.configuration.popParser(),null!=this.level?this.create("node","mstyle",this.nodes,{displaystyle:!1,scriptlevel:this.level}):1===this.nodes.length?this.nodes[0]:this.create("node","mrow",this.nodes)}copyLists(){const t=this.texParser.configuration;for(const[e,a]of Object.entries(this.configuration.nodeLists))for(const o of a)t.addNode(e,o);this.configuration.nodeLists={}}Parse(){this.text="",this.nodes=[],this.envStack=[],super.Parse()}saveText(){if(this.text){const t=this.stack.env.mathvariant,e=b.internalText(this,this.text,t?{mathvariant:t}:{});this.text="",this.Push(e)}}Push(t){if(this.text&&this.saveText(),t instanceof M)return super.Push(t);t instanceof S?this.stack.env.mathcolor=this.stack.env.color:t instanceof P&&(this.addAttributes(t),this.nodes.push(t))}PushMath(t){const e=this.stack.env;t.isKind("TeXAtom")||(t=this.create("node","TeXAtom",[t]));for(const a of["mathsize","mathcolor"])e[a]&&!t.attributes.hasExplicit(a)&&(t.isToken||t.isKind("mstyle")||(t=this.create("node","mstyle",[t])),C.setAttribute(t,a,e[a]));t.isInferred&&(t=this.create("node","mrow",t.childNodes)),this.nodes.push(t)}addAttributes(t){const e=this.stack.env;if(t.isToken)for(const a of["mathsize","mathcolor","mathvariant"])e[a]&&!t.attributes.hasExplicit(a)&&C.setAttribute(t,a,e[a])}ParseTextArg(t,e){const a=this.GetArgument(t);return e=Object.assign(Object.assign({},this.stack.env),e),new y(a,e,this.configuration).mml()}ParseArg(t){return new y(this.GetArgument(t),this.stack.env,this.configuration).mml()}Error(t,e,...a){throw new k(t,e,...a)}}const I=MathJax._.util.Retries,O=(I.handleRetriesFor,I.retryAfter),E=MathJax._.input.tex.base.BaseMethods,R=(E.splitAlignArray,E.default),L={Comment(t,e){for(;t.i<t.string.length&&"\n"!==t.string.charAt(t.i);)t.i++;t.i++},Math(t,e){t.saveText();let a,o,s=t.i,r=0;for(;o=t.GetNext();)switch(a=t.i++,o){case"\\":")"===t.GetCS()&&(o="\\(");case"$":if(0===r&&e===o){const e=t.texParser.configuration,o=new A(t.string.substring(s,a),t.stack.env,e).mml();return void t.PushMath(o)}break;case"{":r++;break;case"}":0===r&&t.Error("ExtraCloseMissingOpen","Extra close brace or missing open brace"),r--}t.Error("MathNotTerminated","Math mode is not properly terminated")},MathModeOnly(t,e){t.Error("MathModeOnly","'%1' allowed only in math mode",e)},Misplaced(t,e){t.Error("Misplaced","Misplaced '%1'",e)},OpenBrace(t,e){const a=t.stack.env;t.envStack.push(a),t.stack.env=Object.assign({},a)},CloseBrace(t,e){t.envStack.length?(t.saveText(),t.stack.env=t.envStack.pop()):t.Error("ExtraCloseMissingOpen","Extra close brace or missing open brace")},OpenQuote(t,e){t.string.charAt(t.i)===e?(t.text+="\u201c",t.i++):t.text+="\u2018"},CloseQuote(t,e){t.string.charAt(t.i)===e?(t.text+="\u201d",t.i++):t.text+="\u2019"},Tilde(t,e){t.text+="\xa0"},Space(t,e){for(t.text+=" ";t.GetNext().match(/\s/);)t.i++},SelfQuote(t,e){t.text+=e.substring(1)},Insert(t,e,a){t.text+=a},Accent(t,e,a){const o=t.ParseArg(e),s=t.create("token","mo",{},a);t.addAttributes(s),t.Push(t.create("node","mover",[o,s]))},Emph(t,e){const a="-tex-mathit"===t.stack.env.mathvariant?"normal":"-tex-mathit";t.Push(t.ParseTextArg(e,{mathvariant:a}))},TextFont(t,e,a){t.saveText(),t.Push(t.ParseTextArg(e,{mathvariant:a}))},SetFont(t,e,a){t.saveText(),t.stack.env.mathvariant=a},SetSize(t,e,a){t.saveText(),t.stack.env.mathsize=a},CheckAutoload(t,e){const a=t.configuration.packageData.get("autoload"),o=t.texParser;e=e.slice(1);const s=o.lookup("macro",e);if(!s||a&&s._func===a.Autoload){if(o.parse("macro",[o,e]),!s)return;O(Promise.resolve())}o.parse("macro",[t,e])},Macro:R.Macro,Spacer:R.Spacer,Hskip:R.Hskip,rule:R.rule,Rule:R.Rule,HandleRef:R.HandleRef,UnderOver:R.UnderOver,Lap:R.Lap,Phantom:R.Phantom,Smash:R.Smash,MmlToken:R.MmlToken},N=MathJax._.input.tex.TokenMap,_=(N.parseResult,N.AbstractTokenMap,N.RegExpMap,N.AbstractParseMap,N.CharacterMap,N.DelimiterMap,N.MacroMap),H=N.CommandMap,F=(N.EnvironmentMap,MathJax._.input.tex.TexConstants.TexConstant),J=MathJax._.util.lengths,w=(J.BIGDIMEN,J.UNITS,J.RELUNITS,J.MATHSPACE),z=(J.length2em,J.percent,J.em,J.px,F.Variant);new _("text-special",{$:L.Math,"%":L.Comment,"^":L.MathModeOnly,_:L.MathModeOnly,"&":L.Misplaced,"#":L.Misplaced,"~":L.Tilde," ":L.Space,"\t":L.Space,"\r":L.Space,"\n":L.Space,"\xa0":L.Tilde,"{":L.OpenBrace,"}":L.CloseBrace,"`":L.OpenQuote,"'":L.CloseQuote}),new H("text-macros",{"(":L.Math,$:L.SelfQuote,_:L.SelfQuote,"%":L.SelfQuote,"{":L.SelfQuote,"}":L.SelfQuote," ":L.SelfQuote,"&":L.SelfQuote,"#":L.SelfQuote,"\\":[L.Macro,"$\\\\$"],"'":[L.Accent,"\xb4"],"\u2019":[L.Accent,"\xb4"],"`":[L.Accent,"`"],"\u2018":[L.Accent,"`"],"^":[L.Accent,"^"],'"':[L.Accent,"\xa8"],"~":[L.Accent,"~"],"=":[L.Accent,"\xaf"],".":[L.Accent,"\u02d9"],u:[L.Accent,"\u02d8"],v:[L.Accent,"\u02c7"],emph:L.Emph,rm:[L.SetFont,z.NORMAL],mit:[L.SetFont,z.ITALIC],oldstyle:[L.SetFont,z.OLDSTYLE],cal:[L.SetFont,z.CALLIGRAPHIC],it:[L.SetFont,"-tex-mathit"],bf:[L.SetFont,z.BOLD],sf:[L.SetFont,z.SANSSERIF],tt:[L.SetFont,z.MONOSPACE],frak:[L.TextFont,z.FRAKTUR],Bbb:[L.TextFont,z.DOUBLESTRUCK],tiny:[L.SetSize,.5],Tiny:[L.SetSize,.6],scriptsize:[L.SetSize,.7],small:[L.SetSize,.85],normalsize:[L.SetSize,1],large:[L.SetSize,1.2],Large:[L.SetSize,1.44],LARGE:[L.SetSize,1.73],huge:[L.SetSize,2.07],Huge:[L.SetSize,2.49],textnormal:[L.Macro,"{\\rm #1}",1],textup:[L.Macro,"{\\rm #1}",1],textrm:[L.Macro,"{\\rm #1}",1],textit:[L.Macro,"{\\it #1}",1],textbf:[L.Macro,"{\\bf #1}",1],textsf:[L.Macro,"{\\sf #1}",1],texttt:[L.Macro,"{\\tt #1}",1],dagger:[L.Insert,"\u2020"],ddagger:[L.Insert,"\u2021"],S:[L.Insert,"\xa7"],AA:[L.Insert,"\u212b"],ldots:[L.Insert,"\u2026"],vdots:[L.Insert,"\u22ee"],",":[L.Spacer,w.thinmathspace],":":[L.Spacer,w.mediummathspace],">":[L.Spacer,w.mediummathspace],";":[L.Spacer,w.thickmathspace],"!":[L.Spacer,w.negativethinmathspace],enspace:[L.Spacer,.5],quad:[L.Spacer,1],qquad:[L.Spacer,2],thinspace:[L.Spacer,w.thinmathspace],negthinspace:[L.Spacer,w.negativethinmathspace],hskip:L.Hskip,hspace:L.Hskip,kern:L.Hskip,mskip:L.Hskip,mspace:L.Hskip,mkern:L.Hskip,rule:L.rule,Rule:[L.Rule],Space:[L.Rule,"blank"],color:L.CheckAutoload,textcolor:L.CheckAutoload,colorbox:L.CheckAutoload,fcolorbox:L.CheckAutoload,href:L.CheckAutoload,style:L.CheckAutoload,class:L.CheckAutoload,data:L.CheckAutoload,cssId:L.CheckAutoload,unicode:L.CheckAutoload,U:L.CheckAutoload,char:L.CheckAutoload,ref:[L.HandleRef,!1],eqref:[L.HandleRef,!0],underline:[L.UnderOver,"2015"],llap:L.Lap,rlap:L.Lap,phantom:L.Phantom,vphantom:[L.Phantom,1,0],hphantom:[L.Phantom,0,1],smash:L.Smash,mmlToken:L.MmlToken});const B=h.create("text-base",{[i.PARSER]:"text",[i.PRIORITY]:1,[i.HANDLER]:{[c.CHARACTER]:["command","text-special"],[c.MACRO]:["text-macros"]},[i.FALLBACK]:{[c.CHARACTER]:(t,e)=>{t.text+=e},macro:(t,e)=>{const a=t.texParser,o=a.lookup("macro",e);o&&o._func!==L.Macro&&t.Error("MathMacro","%1 is only supported in math mode","\\"+e),a.parse("macro",[t,e])}},items:{[g.prototype.kind]:g,[M.prototype.kind]:M,[f.prototype.kind]:f,[S.prototype.kind]:S}});function D(t,e,a,o){const s=t.configuration.packageData.get("textmacros");return t instanceof y||(s.texParser=t),s.parseOptions.clear(),[new y(e,o?{mathvariant:o}:{},s.parseOptions,a).mml()]}const Q=h.create("textmacros",{[i.PRIORITY]:1,config(t,e){const a=new p(e.parseOptions.options.textmacros.packages,["tex","text"]);a.init();const o=new m(a,[]);o.options=e.parseOptions.options,a.config(e),d.addTags(a.tags),o.tags=d.getDefault(),o.tags.configuration=o,o.packageData=e.parseOptions.packageData,o.packageData.set("textmacros",{textConf:a,parseOptions:o,jax:e,texParser:null}),o.options.internalMath=D},[i.PREPROCESSORS]:[t=>{const e=t.data.packageData.get("textmacros");e.parseOptions.nodeFactory.setMmlFactory(e.jax.mmlFactory)}],[i.OPTIONS]:{textmacros:{packages:["text-base"]}}});MathJax.loader&&MathJax.loader.checkVersion("[tex]/textmacros","4.0.0-beta.7","tex-extension"),r({_:{input:{tex:{textmacros:{TextMacrosConfiguration:o,TextMacrosMethods:a,TextParser:e}}}}})})();