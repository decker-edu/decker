(()=>{"use strict";var e={d:(t,n)=>{for(var a in n)e.o(n,a)&&!e.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:n[a]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{BeginEnvItem:()=>M});var n={};e.r(n),e.d(n,{default:()=>b});var a={};e.r(a),e.d(a,{default:()=>R});var r={};e.r(r),e.d(r,{NewcommandConfiguration:()=>D});const i=("undefined"!=typeof window?window:global).MathJax._.components.global,o=(i.GLOBAL,i.isObject,i.combineConfig,i.combineDefaults,i.combineWithMathJax),s=(i.MathJax,MathJax._.input.tex.HandlerTypes),c=s.ConfigurationType,m=s.HandlerType,l=MathJax._.input.tex.Configuration,u=l.Configuration,g=(l.ConfigurationHandler,l.ParserConfiguration,MathJax._.input.tex.TexError.default),d=MathJax._.input.tex.StackItem,f=(d.MmlStack,d.BaseItem);class M extends f{get kind(){return"beginEnv"}get isOpen(){return!0}checkItem(e){if(e.isKind("end")){if(e.getName()!==this.getName())throw new g("EnvBadEnd","\\begin{%1} ended with \\end{%2}",this.getName(),e.getName());return[[this.factory.create("mml",this.toMml())],!0]}if(e.isKind("stop"))throw new g("EnvMissingEnd","Missing \\end{%1}",this.getName());return super.checkItem(e)}}const h=MathJax._.input.tex.UnitUtil.UnitUtil,p=MathJax._.input.tex.Token,N=p.Token,E=p.Macro;var w;!function(e){function t(e,t){return e.string.substring(e.i,e.i+t.length)!==t||t.match(/\\[a-z]+$/i)&&e.string.charAt(e.i+t.length).match(/[a-z]/i)?0:(e.i+=t.length,1)}e.GetCSname=function(e,t){if("\\"!==e.GetNext())throw new g("MissingCS","%1 must be followed by a control sequence",t);return h.trimSpaces(e.GetArgument(t)).substring(1)},e.GetCsNameArgument=function(e,t){let n=h.trimSpaces(e.GetArgument(t));if("\\"===n.charAt(0)&&(n=n.substring(1)),!n.match(/^(.|[a-z]+)$/i))throw new g("IllegalControlSequenceName","Illegal control sequence name for %1",t);return n},e.GetArgCount=function(e,t){let n=e.GetBrackets(t);if(n&&(n=h.trimSpaces(n),!n.match(/^[0-9]+$/)))throw new g("IllegalParamNumber","Illegal number of parameters specified in %1",t);return n},e.GetTemplate=function(e,t,n){let a=e.GetNext(),r=[],i=0,o=e.i;for(;e.i<e.string.length;){if(a=e.GetNext(),"#"===a){if(o!==e.i&&(r[i]=e.string.substring(o,e.i)),a=e.string.charAt(++e.i),!a.match(/^[1-9]$/))throw new g("CantUseHash2","Illegal use of # in template for %1",n);if(parseInt(a)!==++i)throw new g("SequentialParam","Parameters for %1 must be numbered sequentially",n);o=e.i+1}else if("{"===a)return o!==e.i&&(r[i]=e.string.substring(o,e.i)),r.length>0?[i.toString()].concat(r):i;e.i++}throw new g("MissingReplacementString","Missing replacement string for definition of %1",t)},e.GetParameter=function(e,n,a){if(null==a)return e.GetArgument(n);let r=e.i,i=0,o=0;for(;e.i<e.string.length;){let s=e.string.charAt(e.i);if("{"===s)e.i===r&&(o=1),e.GetArgument(n),i=e.i-r;else{if(t(e,a))return o&&(r++,i-=2),i<0?"":e.string.substring(r,r+i);if("\\"===s){e.i++,i++,o=0;let t=e.string.substring(e.i).match(/[a-z]+|./i);t&&(e.i+=t[0].length,i=e.i-r)}else e.i++,i++,o=0}}throw new g("RunawayArgument","Runaway argument for %1?",n)},e.MatchParam=t,e.addDelimiter=function(t,n,a,r){t.configuration.handlers.retrieve(e.NEW_DELIMITER).add(n,new N(n,a,r))},e.addMacro=function(t,n,a,r,i=""){t.configuration.handlers.retrieve(e.NEW_COMMAND).add(n,new E(i||n,a,r))},e.addEnvironment=function(t,n,a,r){t.configuration.handlers.retrieve(e.NEW_ENVIRONMENT).add(n,new E(n,a,r))},e.NEW_DELIMITER="new-Delimiter",e.NEW_COMMAND="new-Command",e.NEW_ENVIRONMENT="new-Environment"}(w||(w={}));const b=w,A=MathJax._.input.tex.TokenMap,x=(A.parseResult,A.AbstractTokenMap,A.RegExpMap,A.AbstractParseMap,A.CharacterMap,A.DelimiterMap),I=A.MacroMap,v=A.CommandMap,y=A.EnvironmentMap,C=MathJax._.input.tex.base.BaseMethods,G=(C.splitAlignArray,C.default),T=MathJax._.input.tex.ParseUtil,_=(T.KeyValueType,T.KeyValueTypes,T.ParseUtil),k={NewCommand(e,t){let n=b.GetCsNameArgument(e,t),a=b.GetArgCount(e,t),r=e.GetBrackets(t),i=e.GetArgument(t);b.addMacro(e,n,k.Macro,[i,a,r]),e.Push(e.itemFactory.create("null"))},NewEnvironment(e,t){let n=h.trimSpaces(e.GetArgument(t)),a=b.GetArgCount(e,t),r=e.GetBrackets(t),i=e.GetArgument(t),o=e.GetArgument(t);b.addEnvironment(e,n,k.BeginEnv,[!0,i,o,a,r]),e.Push(e.itemFactory.create("null"))},MacroDef(e,t){let n=b.GetCSname(e,t),a=b.GetTemplate(e,t,"\\"+n),r=e.GetArgument(t);a instanceof Array?b.addMacro(e,n,k.MacroWithTemplate,[r].concat(a)):b.addMacro(e,n,k.Macro,[r,a]),e.Push(e.itemFactory.create("null"))},Let(e,t){const n=b.GetCSname(e,t);let a=e.GetNext();"="===a&&(e.i++,a=e.GetNext());const r=e.configuration.handlers;if(e.Push(e.itemFactory.create("null")),"\\"===a){t=b.GetCSname(e,t);let a=r.get(m.DELIMITER).lookup("\\"+t);if(a)return void b.addDelimiter(e,"\\"+n,a.char,a.attributes);const i=r.get(m.MACRO).applicable(t);if(!i)return;if(i instanceof I){const a=i.lookup(t);return void b.addMacro(e,n,a.func,a.args,a.token)}a=i.lookup(t);const o=e=>i.parser(e,a);return void b.addMacro(e,n,o,[n,a.char])}e.i++;const i=r.get(m.DELIMITER).lookup(a);i?b.addDelimiter(e,"\\"+n,i.char,i.attributes):b.addMacro(e,n,k.Macro,[a])},MacroWithTemplate(e,t,n,a,...r){const i=parseInt(a,10);if(r.length){let a=[];if(e.GetNext(),r[0]&&!b.MatchParam(e,r[0]))throw new g("MismatchUseDef","Use of %1 doesn't match its definition",t);if(i){for(let n=0;n<i;n++)a.push(b.GetParameter(e,t,r[n+1]));n=_.substituteArgs(e,a,n)}}e.string=_.addArgs(e,n,e.string.slice(e.i)),e.i=0,_.checkMaxMacros(e)},BeginEnv(e,t,n,a,r,i){const o=t.getName();if(t.getProperty("end")&&e.stack.env.closing===o)return delete e.stack.env.closing,a&&e.stack.env.processing!==o?(e.stack.env.processing=o,e.string=_.addArgs(e,`${a}\\end{${t.getName()}}`,e.string.slice(e.i)),e.i=0,null):(delete e.stack.env.processing,e.itemFactory.create("end").setProperty("name",o));if(r){let o=[];if(null!=i){let n=e.GetBrackets("\\begin{"+t.getName()+"}");o.push(null==n?i:n)}for(let n=o.length;n<r;n++)o.push(e.GetArgument("\\begin{"+t.getName()+"}"));n=_.substituteArgs(e,o,n),a=_.substituteArgs(e,[],a)}return e.string=_.addArgs(e,n,e.string.slice(e.i)),e.i=0,e.itemFactory.create("beginEnv").setProperty("name",t.getName())},Macro:G.Macro},R=k;new v("Newcommand-macros",{newcommand:R.NewCommand,renewcommand:R.NewCommand,newenvironment:R.NewEnvironment,renewenvironment:R.NewEnvironment,def:R.MacroDef,let:R.Let});const P=MathJax._.input.tex.ParseMethods.default;const D=u.create("newcommand",{[c.HANDLER]:{macro:["Newcommand-macros"]},[c.ITEMS]:{[M.prototype.kind]:M},[c.OPTIONS]:{maxMacros:1e3},[c.INIT]:function(e){new x(b.NEW_DELIMITER,P.delimiter,{}),new v(b.NEW_COMMAND,{}),new y(b.NEW_ENVIRONMENT,P.environment,{}),e.append(u.local({[c.HANDLER]:{[m.CHARACTER]:[],[m.DELIMITER]:[b.NEW_DELIMITER],[m.MACRO]:[b.NEW_DELIMITER,b.NEW_COMMAND],[m.ENVIRONMENT]:[b.NEW_ENVIRONMENT]},[c.PRIORITY]:-1}))}});MathJax.loader&&MathJax.loader.checkVersion("[tex]/newcommand","4.0.0-beta.7","tex-extension"),o({_:{input:{tex:{newcommand:{NewcommandConfiguration:r,NewcommandItems:t,NewcommandMethods:a,NewcommandUtil:n}}}}})})();