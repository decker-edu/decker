(()=>{"use strict";var t={d:(e,a)=>{for(var r in a)t.o(a,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:a[r]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};t.r(e),t.d(e,{MathtoolsUtil:()=>V});var a={};t.r(a),t.d(a,{MathtoolsMethods:()=>$});var r={};t.r(r),t.d(r,{MathtoolsTagFormat:()=>W});var o={};t.r(o),t.d(o,{MultlinedItem:()=>Q});var n={};t.r(n),t.d(n,{MathtoolsConfiguration:()=>tt,PAIREDDELIMS:()=>Y,fixPrescripts:()=>Z});const s=("undefined"!=typeof window?window:global).MathJax._.components.global,l=(s.GLOBAL,s.isObject,s.combineConfig,s.combineDefaults,s.combineWithMathJax),i=(s.MathJax,MathJax._.input.tex.HandlerTypes),m=i.ConfigurationType,c=i.HandlerType,d=MathJax._.input.tex.Configuration,p=d.Configuration,h=(d.ConfigurationHandler,d.ParserConfiguration,MathJax._.input.tex.TokenMap),u=(h.parseResult,h.AbstractTokenMap,h.RegExpMap,h.AbstractParseMap,h.CharacterMap,h.DelimiterMap),g=(h.MacroMap,h.CommandMap),M=h.EnvironmentMap,x=MathJax._.input.tex.NodeUtil.default,f=MathJax._.util.Options,w=(f.isObject,f.APPEND,f.REMOVE,f.OPTIONS,f.Expandable,f.expandable),A=(f.makeArray,f.keys,f.copy,f.insert,f.defaultOptions,f.userOptions,f.selectOptions,f.selectOptionsFromKeys,f.separateOptions,f.lookup),b=MathJax._.input.tex.ParseMethods.default,y=MathJax._.input.tex.TexConstants.TexConstant,P=MathJax._.input.tex.ParseUtil,T=(P.KeyValueType,P.KeyValueTypes,P.ParseUtil),k=MathJax._.input.tex.UnitUtil.UnitUtil,v=MathJax._.input.tex.ams.AmsMethods,S=(v.NEW_OPS,v.AmsMethods),C=MathJax._.input.tex.base.BaseMethods,D=(C.splitAlignArray,C.default),E=MathJax._.input.tex.TexParser.default,I=MathJax._.input.tex.TexError.default,G=MathJax._.core.MmlTree.MmlNode,O=G.TEXCLASS,N=(G.TEXCLASSNAMES,G.MATHVARIANTS,G.indentAttributes,G.AbstractMmlNode,G.AbstractMmlTokenNode,G.AbstractMmlLayoutNode,G.AbstractMmlBaseNode,G.AbstractMmlEmptyNode,G.TextNode,G.XMLNode,MathJax._.util.lengths),F=(N.BIGDIMEN,N.UNITS,N.RELUNITS,N.MATHSPACE,N.length2em),L=(N.percent,N.em),R=(N.px,MathJax._.input.tex.newcommand.NewcommandUtil.default),B=MathJax._.input.tex.newcommand.NewcommandMethods.default,_=MathJax._.input.tex.base.BaseItems,J=(_.StartItem,_.StopItem,_.OpenItem,_.CloseItem,_.NullItem,_.PrimeItem,_.SubsupItem,_.OverItem,_.LeftItem,_.Middle,_.RightItem,_.BreakItem,_.BeginItem,_.EndItem,_.StyleItem,_.PositionItem,_.CellItem,_.MmlItem,_.FnItem,_.NotItem,_.NonscriptItem,_.DotsItem,_.ArrayItem,_.EqnArrayItem),U=(_.MstyleItem,_.EquationItem,MathJax._.input.tex.Token),q=(U.Token,U.Macro),V={setDisplayLevel(t,e){if(!e)return;const[a,r]=A(e,{"\\displaystyle":[!0,0],"\\textstyle":[!1,0],"\\scriptstyle":[!1,1],"\\scriptscriptstyle":[!1,2]},[null,null]);null!==a&&(t.attributes.set("displaystyle",a),t.attributes.set("scriptlevel",r))},checkAlignment(t,e){const a=t.stack.Top();if(a.kind!==J.prototype.kind)throw new I("NotInAlignment","%1 can only be used in aligment environments",e);return a},addPairedDelims(t,e,a){t.handlers.retrieve(Y).add(e,new q(e,$.PairedDelimiters,a))},spreadLines(t,e){if(!t.isKind("mtable"))return;let a=t.attributes.get("rowspacing");if(a){const t=k.dimen2em(e);a=a.split(/ /).map((e=>k.em(Math.max(0,k.dimen2em(e)+t)))).join(" ")}else a=e;t.attributes.set("rowspacing",a)},plusOrMinus(t,e){if(!(e=e.trim()).match(/^[-+]?(?:\d+(?:\.\d*)?|\.\d+)$/))throw new I("NotANumber","Argument to %1 is not a number",t);return e.match(/^[-+]/)?e:"+"+e},getScript(t,e,a){let r=k.trimSpaces(t.GetArgument(e));if(""===r)return t.create("node","none");const o=t.options.mathtools[`prescript-${a}-format`];return o&&(r=`${o}{${r}}`),new E(r,t.stack.env,t.configuration).mml()}},$={MtMatrix(t,e,a,r){const o=t.GetBrackets(`\\begin{${e.getName()}}`,"c");return $.Array(t,e,a,r,o)},MtSmallMatrix:(t,e,a,r,o)=>(o||(o=t.GetBrackets(`\\begin{${e.getName()}}`,t.options.mathtools["smallmatrix-align"])),$.Array(t,e,a,r,o,k.em(1/3),".2em","S",1)),MtMultlined(t,e){const a=`\\begin{${e.getName()}}`;let r="c",o="";if(!t.nextIsSpace()){const e=t.GetBrackets(a,t.options.mathtools["multlined-pos"]||"c");if(e.match(/^[ctb]$/)?(r=e,o=t.nextIsSpace()?"":t.GetBrackets(a,"")):o=e,o&&!k.matchDimen(o)[0])throw new I("BadWidth","Width for %1 must be a dimension",a)}t.Push(e);const n=t.itemFactory.create("multlined",t,e);return n.arraydef={displaystyle:!0,rowspacing:".5em",width:o||"auto",columnwidth:"100%"},T.setArrayAlign(n,r||"c")},HandleShove(t,e,a){let r=t.stack.Top();if("multline"!==r.kind&&"multlined"!==r.kind)throw new I("CommandInMultlined","%1 can only appear within the multline or multlined environments",e);if(r.Size())throw new I("CommandAtTheBeginingOfLine","%1 must come at the beginning of the line",e);r.setProperty("shove",a);let o=t.GetBrackets(e),n=t.ParseArg(e);if(o){let e=t.create("node","mrow",[]),r=t.create("node","mspace",[],{width:o});"left"===a?(e.appendChild(r),e.appendChild(n)):(e.appendChild(n),e.appendChild(r)),n=e}t.Push(n)},SpreadLines(t,e){if(t.stack.env.closing===e.getName()){delete t.stack.env.closing;const e=t.stack.Pop(),a=e.toMml(),r=e.getProperty("spread");if(a.isInferred)for(const t of x.getChildren(a))V.spreadLines(t,r);else V.spreadLines(a,r);t.Push(a)}else{const a=t.GetDimen(`\\begin{${e.getName()}}`);e.setProperty("spread",a),e.setProperty("nestable",!0),t.Push(e)}},Cases(t,e,a,r,o){const n=t.itemFactory.create("array").setProperty("casesEnv",e.getName());return n.arraydef={rowspacing:".2em",columnspacing:"1em",columnalign:"left"},"D"===o&&(n.arraydef.displaystyle=!0),n.setProperties({open:a,close:r}),t.Push(e),n},MathLap(t,e,a,r){const o=t.GetBrackets(e,"").trim();let n=t.create("node","mstyle",[t.create("node","mpadded",[t.ParseArg(e)],Object.assign({width:0},"r"===a?{}:{lspace:"l"===a?"-1width":"-.5width"}))],{"data-cramped":r});V.setDisplayLevel(n,o),t.Push(t.create("node","TeXAtom",[n]))},Cramped(t,e){const a=t.GetBrackets(e,"").trim(),r=t.ParseArg(e),o=t.create("node","mstyle",[r],{"data-cramped":!0});V.setDisplayLevel(o,a),t.Push(o)},MtLap(t,e,a){const r=T.internalMath(t,t.GetArgument(e),0);let o=t.create("node","mpadded",r,{width:0});"r"!==a&&x.setAttribute(o,"lspace","l"===a?"-1width":"-.5width"),t.Push(o)},MathMakeBox(t,e){const a=t.GetBrackets(e),r=t.GetBrackets(e,"c"),o=t.create("node","mpadded",[t.ParseArg(e)]);a&&x.setAttribute(o,"width",a);const n=A(r.toLowerCase(),{c:"center",r:"right"},"");n&&x.setAttribute(o,"data-align",n),r.toLowerCase()!==r&&x.setAttribute(o,"data-overflow","linebreak"),t.Push(o)},MathMBox(t,e){t.Push(t.create("node","mrow",[t.ParseArg(e)]))},UnderOverBracket(t,e){const a=F(t.GetBrackets(e,".1em"),.1),r=t.GetBrackets(e,".2em"),o=t.GetArgument(e),[n,s,l]="o"===e.charAt(1)?["over","accent","bottom"]:["under","accentunder","top"],i=L(a),m=new E(o,t.stack.env,t.configuration).mml(),c=new E(o,t.stack.env,t.configuration).mml(),d=t.create("node","mpadded",[t.create("node","mphantom",[c])],{style:`border: ${i} solid; border-${l}: none`,height:r,depth:0}),p=T.underOver(t,m,d,n,!0),h=x.getChildAt(x.getChildAt(p,0),0);x.setAttribute(h,s,!0),t.Push(p)},Aboxed(t,e){const a=V.checkAlignment(t,e);a.row.length%2==1&&a.row.push(t.create("node","mtd",[]));const r=t.GetArgument(e),o=t.string.substring(t.i);t.string=r+"&&\\endAboxed",t.i=0;const n=t.GetUpTo(e,"&"),s=t.GetUpTo(e,"&");t.GetUpTo(e,"\\endAboxed");const l=T.substituteArgs(t,[n,s],"\\rlap{\\boxed{#1{}#2}}\\kern.267em\\phantom{#1}&\\phantom{{}#2}\\kern.267em");t.string=l+o,t.i=0},ArrowBetweenLines(t,e){const a=V.checkAlignment(t,e);if(a.Size()||a.row.length)throw new I("BetweenLines","%1 must be on a row by itself",e);const r=t.GetStar(),o=t.GetBrackets(e,"\\Updownarrow");r&&(a.EndEntry(),a.EndEntry());const n=new E(r?"\\quad"+o:o+"\\quad",t.stack.env,t.configuration).mml();t.Push(n),a.EndEntry(),a.EndRow()},VDotsWithin(t,e){const a=t.stack.Top(),r=a.table&&a.getProperty("flushspaceabove")===a.table.length,o="\\mmlToken{mi}{}"+t.GetArgument(e)+"\\mmlToken{mi}{}",n=new E(o,t.stack.env,t.configuration).mml();let s=t.create("node","mpadded",[t.create("node","mpadded",[t.create("node","mo",[t.create("text","\u22ee")])],Object.assign({width:0,lspace:"-.5width"},r?{height:"-.6em",voffset:"-.18em"}:{})),t.create("node","mphantom",[n])],{lspace:".5width"});t.Push(s)},ShortVDotsWithin(t,e){const a=t.stack.Top(),r=t.GetStar();a.EndEntry&&($.FlushSpaceAbove(t,"\\MTFlushSpaceAbove"),!r&&a.EndEntry()),$.VDotsWithin(t,"\\vdotswithin"),a.EndEntry&&(r&&a.EndEntry(),$.FlushSpaceBelow(t,"\\MTFlushSpaceBelow"))},FlushSpaceAbove(t,e){const a=V.checkAlignment(t,e);a.table&&(a.setProperty("flushspaceabove",a.table.length),a.addRowSpacing("-"+t.options.mathtools.shortvdotsadjustabove))},FlushSpaceBelow(t,e){const a=V.checkAlignment(t,e);a.table&&(a.Size()&&a.EndEntry(),a.EndRow(),a.addRowSpacing("-"+t.options.mathtools.shortvdotsadjustbelow))},PairedDelimiters(t,e,a,r,o="#1",n=1,s="",l=""){const i=t.GetStar(),m=i?"":t.GetBrackets(e),[c,d,p]=i?["\\mathopen{\\left","\\right","}\\mathclose{}"]:m?[m+"l",m+"r",""]:["","",""],h=i?"\\middle":m||"";if(n){const a=[];for(let r=a.length;r<n;r++)a.push(t.GetArgument(e));s=T.substituteArgs(t,a,s),o=T.substituteArgs(t,a,o),l=T.substituteArgs(t,a,l)}o=o.replace(/\\delimsize/g,h),t.string=[s,c,a,o,d,r,p,l,t.string.substring(t.i)].reduce(((e,a)=>T.addArgs(t,e,a)),""),t.i=0,T.checkMaxMacros(t)},DeclarePairedDelimiter(t,e){const a=R.GetCsNameArgument(t,e),r=t.GetArgument(e),o=t.GetArgument(e);V.addPairedDelims(t.configuration,a,[r,o]),t.Push(t.itemFactory.create("null"))},DeclarePairedDelimiterX(t,e){const a=R.GetCsNameArgument(t,e),r=R.GetArgCount(t,e),o=t.GetArgument(e),n=t.GetArgument(e),s=t.GetArgument(e);V.addPairedDelims(t.configuration,a,[o,n,s,r]),t.Push(t.itemFactory.create("null"))},DeclarePairedDelimiterXPP(t,e){const a=R.GetCsNameArgument(t,e),r=R.GetArgCount(t,e),o=t.GetArgument(e),n=t.GetArgument(e),s=t.GetArgument(e),l=t.GetArgument(e),i=t.GetArgument(e);V.addPairedDelims(t.configuration,a,[n,s,i,r,o,l]),t.Push(t.itemFactory.create("null"))},CenterColon(t,e,a,r=!1,o=!1){const n=t.options.mathtools;let s=t.create("token","mo",{},":");if(a&&(n.centercolon||r)){const e=n["centercolon-offset"];s=t.create("node","mpadded",[s],Object.assign({voffset:e,height:`+${e}`,depth:`-${e}`},o?{width:n["thincolon-dw"],lspace:n["thincolon-dx"]}:{}))}t.Push(s)},Relation(t,e,a,r){t.options.mathtools["use-unicode"]&&r?t.Push(t.create("token","mo",{texClass:O.REL},r)):(a="\\mathrel{"+a.replace(/:/g,"\\MTThinColon").replace(/-/g,"\\mathrel{-}")+"}",t.string=T.addArgs(t,a,t.string.substring(t.i)),t.i=0)},NArrow(t,e,a,r){t.Push(t.create("node","TeXAtom",[t.create("token","mtext",{},a),t.create("node","mpadded",[t.create("node","mpadded",[t.create("node","menclose",[t.create("node","mspace",[],{height:".2em",depth:0,width:".4em"})],{notation:"updiagonalstrike","data-thickness":".05em","data-padding":0})],{width:0,lspace:"-.5width",voffset:r}),t.create("node","mphantom",[t.create("token","mtext",{},a)])],{width:0,lspace:"-.5width"})],{texClass:O.REL}))},SplitFrac(t,e,a){const r=t.ParseArg(e),o=t.ParseArg(e);t.Push(t.create("node","mstyle",[t.create("node","mfrac",[t.create("node","mstyle",[r,t.create("token","mi"),t.create("token","mspace",{width:"1em"})],{scriptlevel:0}),t.create("node","mstyle",[t.create("token","mspace",{width:"1em"}),t.create("token","mi"),o],{scriptlevel:0})],{linethickness:0,numalign:"left",denomalign:"right"})],{displaystyle:a,scriptlevel:0}))},XMathStrut(t,e){let a=t.GetBrackets(e),r=t.GetArgument(e);r=V.plusOrMinus(e,r),a=V.plusOrMinus(e,a||r),t.Push(t.create("node","TeXAtom",[t.create("node","mpadded",[t.create("node","mphantom",[t.create("token","mo",{stretchy:!1},"(")])],{width:0,height:r+"height",depth:a+"depth"})],{texClass:O.ORD}))},Prescript(t,e){const a=V.getScript(t,e,"sup"),r=V.getScript(t,e,"sub"),o=V.getScript(t,e,"arg");if(x.isType(a,"none")&&x.isType(r,"none"))return void t.Push(o);const n=t.create("node","mmultiscripts",[o]);x.getChildren(n).push(null,null),x.appendChildren(n,[t.create("node","mprescripts"),r,a]),n.setProperty("fixPrescript",!0),t.Push(n)},NewTagForm(t,e,a=!1){const r=t.tags;if(!("mtFormats"in r))throw new I("TagsNotMT","%1 can only be used with ams or mathtools tags",e);const o=t.GetArgument(e).trim();if(!o)throw new I("InvalidTagFormID","Tag form name can't be empty");const n=t.GetBrackets(e,""),s=t.GetArgument(e),l=t.GetArgument(e);if(!a&&r.mtFormats.has(o))throw new I("DuplicateTagForm","Duplicate tag form: %1",o);r.mtFormats.set(o,[s,l,n]),t.Push(t.itemFactory.create("null"))},UseTagForm(t,e){const a=t.tags;if(!("mtFormats"in a))throw new I("TagsNotMT","%1 can only be used with ams or mathtools tags",e);const r=t.GetArgument(e).trim();if(!r)return a.mtCurrent=null,void t.Push(t.itemFactory.create("null"));if(!a.mtFormats.has(r))throw new I("UndefinedTagForm","Undefined tag form: %1",r);a.mtCurrent=a.mtFormats.get(r),t.Push(t.itemFactory.create("null"))},SetOptions(t,e){const a=t.options.mathtools;if(!a["allow-mathtoolsset"])throw new I("ForbiddenMathtoolsSet","%1 is disabled",e);const r={};Object.keys(a).forEach((t=>{"pariedDelimiters"!==t&&"tagforms"!==t&&"allow-mathtoolsset"!==t&&(r[t]=1)}));const o=t.GetArgument(e),n=T.keyvalOptions(o,r,!0);for(const t of Object.keys(n))a[t]=n[t];t.Push(t.itemFactory.create("null"))},Array:D.Array,Macro:D.Macro,xArrow:S.xArrow,HandleRef:S.HandleRef,AmsEqnArray:S.AmsEqnArray,MacroWithTemplate:B.MacroWithTemplate};new g("mathtools-macros",{shoveleft:[$.HandleShove,y.Align.LEFT],shoveright:[$.HandleShove,y.Align.RIGHT],xleftrightarrow:[$.xArrow,8596,10,10],xLeftarrow:[$.xArrow,8656,12,7],xRightarrow:[$.xArrow,8658,7,12],xLeftrightarrow:[$.xArrow,8660,12,12],xhookleftarrow:[$.xArrow,8617,10,5],xhookrightarrow:[$.xArrow,8618,5,10],xmapsto:[$.xArrow,8614,10,10],xrightharpoondown:[$.xArrow,8641,5,10],xleftharpoondown:[$.xArrow,8637,10,5],xrightleftharpoons:[$.xArrow,8652,10,10],xrightharpoonup:[$.xArrow,8640,5,10],xleftharpoonup:[$.xArrow,8636,10,5],xleftrightharpoons:[$.xArrow,8651,10,10],mathllap:[$.MathLap,"l",!1],mathrlap:[$.MathLap,"r",!1],mathclap:[$.MathLap,"c",!1],clap:[$.MtLap,"c"],textllap:[$.MtLap,"l"],textrlap:[$.MtLap,"r"],textclap:[$.MtLap,"c"],cramped:$.Cramped,crampedllap:[$.MathLap,"l",!0],crampedrlap:[$.MathLap,"r",!0],crampedclap:[$.MathLap,"c",!0],crampedsubstack:[$.Macro,"\\begin{crampedsubarray}{c}#1\\end{crampedsubarray}",1],mathmbox:$.MathMBox,mathmakebox:$.MathMakeBox,overbracket:$.UnderOverBracket,underbracket:$.UnderOverBracket,refeq:$.HandleRef,MoveEqLeft:[$.Macro,"\\hspace{#1em}&\\hspace{-#1em}",1,"2"],Aboxed:$.Aboxed,ArrowBetweenLines:$.ArrowBetweenLines,vdotswithin:$.VDotsWithin,shortvdotswithin:$.ShortVDotsWithin,MTFlushSpaceAbove:$.FlushSpaceAbove,MTFlushSpaceBelow:$.FlushSpaceBelow,DeclarePairedDelimiter:$.DeclarePairedDelimiter,DeclarePairedDelimiterX:$.DeclarePairedDelimiterX,DeclarePairedDelimiterXPP:$.DeclarePairedDelimiterXPP,DeclarePairedDelimiters:$.DeclarePairedDelimiter,DeclarePairedDelimitersX:$.DeclarePairedDelimiterX,DeclarePairedDelimitersXPP:$.DeclarePairedDelimiterXPP,centercolon:[$.CenterColon,!0,!0],ordinarycolon:[$.CenterColon,!1],MTThinColon:[$.CenterColon,!0,!0,!0],coloneqq:[$.Relation,":=","\u2254"],Coloneqq:[$.Relation,"::=","\u2a74"],coloneq:[$.Relation,":-"],Coloneq:[$.Relation,"::-"],eqqcolon:[$.Relation,"=:","\u2255"],Eqqcolon:[$.Relation,"=::"],eqcolon:[$.Relation,"-:","\u2239"],Eqcolon:[$.Relation,"-::"],colonapprox:[$.Relation,":\\approx"],Colonapprox:[$.Relation,"::\\approx"],colonsim:[$.Relation,":\\sim"],Colonsim:[$.Relation,"::\\sim"],dblcolon:[$.Relation,"::","\u2237"],nuparrow:[$.NArrow,"\u2191",".06em"],ndownarrow:[$.NArrow,"\u2193",".25em"],bigtimes:[$.Macro,"\\mathop{\\Large\\kern-.1em\\boldsymbol{\\times}\\kern-.1em}"],splitfrac:[$.SplitFrac,!1],splitdfrac:[$.SplitFrac,!0],xmathstrut:$.XMathStrut,prescript:$.Prescript,newtagform:[$.NewTagForm,!1],renewtagform:[$.NewTagForm,!0],usetagform:$.UseTagForm,adjustlimits:[$.MacroWithTemplate,"\\mathop{{#1}\\vphantom{{#3}}}_{{#2}\\vphantom{{#4}}}\\mathop{{#3}\\vphantom{{#1}}}_{{#4}\\vphantom{{#2}}}",4,,"_",,"_"],mathtoolsset:$.SetOptions}),new M("mathtools-environments",b.environment,{dcases:[$.Array,null,"\\{","","ll",null,".2em","D"],rcases:[$.Array,null,"","\\}","ll",null,".2em"],drcases:[$.Array,null,"","\\}","ll",null,".2em","D"],"dcases*":[$.Cases,null,"{","","D"],"rcases*":[$.Cases,null,"","}"],"drcases*":[$.Cases,null,"","}","D"],"cases*":[$.Cases,null,"{",""],"matrix*":[$.MtMatrix,null,null,null],"pmatrix*":[$.MtMatrix,null,"(",")"],"bmatrix*":[$.MtMatrix,null,"[","]"],"Bmatrix*":[$.MtMatrix,null,"\\{","\\}"],"vmatrix*":[$.MtMatrix,null,"\\vert","\\vert"],"Vmatrix*":[$.MtMatrix,null,"\\Vert","\\Vert"],"smallmatrix*":[$.MtSmallMatrix,null,null,null],psmallmatrix:[$.MtSmallMatrix,null,"(",")","c"],"psmallmatrix*":[$.MtSmallMatrix,null,"(",")"],bsmallmatrix:[$.MtSmallMatrix,null,"[","]","c"],"bsmallmatrix*":[$.MtSmallMatrix,null,"[","]"],Bsmallmatrix:[$.MtSmallMatrix,null,"\\{","\\}","c"],"Bsmallmatrix*":[$.MtSmallMatrix,null,"\\{","\\}"],vsmallmatrix:[$.MtSmallMatrix,null,"\\vert","\\vert","c"],"vsmallmatrix*":[$.MtSmallMatrix,null,"\\vert","\\vert"],Vsmallmatrix:[$.MtSmallMatrix,null,"\\Vert","\\Vert","c"],"Vsmallmatrix*":[$.MtSmallMatrix,null,"\\Vert","\\Vert"],crampedsubarray:[$.Array,null,null,null,null,"0em","0.1em","S'",1],multlined:$.MtMultlined,spreadlines:[$.SpreadLines,!0],lgathered:[$.AmsEqnArray,null,null,null,"l","t",null,".5em","D"],rgathered:[$.AmsEqnArray,null,null,null,"r","t",null,".5em","D"]}),new u("mathtools-delimiters",b.delimiter,{"\\lparen":"(","\\rparen":")"}),new g("mathtools-characters",{":":[$.CenterColon,!0]});const j=MathJax._.input.tex.Tags,X=(j.Label,j.TagInfo,j.AbstractTags,j.NoTags,j.AllTags,j.TagsFactory);let H=0;function W(t,e){const a=e.parseOptions.options.tags;"base"!==a&&t.tags.hasOwnProperty(a)&&X.add(a,t.tags[a]);const r=X.create(e.parseOptions.options.tags).constructor;H++;const o="MathtoolsTags-"+H;X.add(o,class extends r{constructor(){super(),this.mtFormats=new Map,this.mtCurrent=null;const t=e.parseOptions.options.mathtools.tagforms;for(const e of Object.keys(t)){if(!Array.isArray(t[e])||3!==t[e].length)throw new I("InvalidTagFormDef",'The tag form definition for "%1" should be an array fo three strings',e);this.mtFormats.set(e,t[e])}}formatTag(t){if(this.mtCurrent){const[e,a,r]=this.mtCurrent;return r?`${e}${r}{${t}}${a}`:`${e}${t}${a}`}return super.formatTag(t)}}),e.parseOptions.options.tags=o}const z=MathJax._.input.tex.ams.AmsItems,K=z.MultlineItem;z.FlalignItem;class Q extends K{get kind(){return"multlined"}EndTable(){if((this.Size()||this.row.length)&&(this.EndEntry(),this.EndRow()),this.table.length>1){const t=this.factory.configuration.options.mathtools,e=t.multlinegap,a=t["firstline-afterskip"]||e,r=t["lastline-preskip"]||e,o=x.getChildren(this.table[0])[0];x.getAttribute(o,"columnalign")!==y.Align.RIGHT&&o.appendChild(this.create("node","mspace",[],{width:a}));const n=x.getChildren(this.table[this.table.length-1])[0];if(x.getAttribute(n,"columnalign")!==y.Align.LEFT){const t=x.getChildren(n)[0];t.childNodes.unshift(null);const e=this.create("node","mspace",[],{width:r});x.setChild(t,0,e)}}super.EndTable.call(this)}}const Y="mathtools-paired-delims";function Z({data:t}){for(const e of t.getList("mmultiscripts")){if(!e.getProperty("fixPrescript"))continue;const a=x.getChildren(e);let r=0;for(const o of[1,2])a[o]||(x.setChild(e,o,t.nodeFactory.create("node","none")),r++);for(const r of[4,5])x.isType(a[r],"mrow")&&0===x.getChildren(a[r]).length&&x.setChild(e,r,t.nodeFactory.create("node","none"));2===r&&a.splice(1,2)}}const tt=p.create("mathtools",{[m.HANDLER]:{macro:["mathtools-macros","mathtools-delimiters"],[c.ENVIRONMENT]:["mathtools-environments"],[c.DELIMITER]:["mathtools-delimiters"],[c.CHARACTER]:["mathtools-characters"]},[m.ITEMS]:{[Q.prototype.kind]:Q},[m.INIT]:function(t){new g(Y,{}),t.append(p.local({[m.HANDLER]:{[c.MACRO]:[Y]},priority:-5}))},[m.CONFIG]:function(t,e){const a=e.parseOptions,r=a.options.mathtools.pairedDelimiters;for(const t of Object.keys(r))V.addPairedDelims(a,t,r[t]);W(t,e)},[m.POSTPROCESSORS]:[[Z,-6]],[m.OPTIONS]:{mathtools:{multlinegap:"1em","multlined-pos":"c","firstline-afterskip":"","lastline-preskip":"","smallmatrix-align":"c",shortvdotsadjustabove:".2em",shortvdotsadjustbelow:".2em",centercolon:!1,"centercolon-offset":".04em","thincolon-dx":"-.04em","thincolon-dw":"-.08em","use-unicode":!1,"prescript-sub-format":"","prescript-sup-format":"","prescript-arg-format":"","allow-mathtoolsset":!0,pairedDelimiters:w({}),tagforms:w({})}}});MathJax.loader&&MathJax.loader.checkVersion("[tex]/mathtools","4.0.0-beta.7","tex-extension"),l({_:{input:{tex:{mathtools:{MathtoolsConfiguration:n,MathtoolsItems:o,MathtoolsMethods:a,MathtoolsTags:r,MathtoolsUtil:e}}}}})})();