<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="$lang$" xml:lang="$lang$" $if(dir)$ dir="$dir$" $endif$>

<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />

  <script type="module">
    /* Store JSON encoded Pandoc meta data in a global variable. */
    import initializeDecker from "./$decker-support-dir$/js/decker.js";
    initializeDecker("$decker-meta-url$");
  </script>

  $for(author-meta)$
  <meta name="author" content="$author-meta$" />
  $endfor$
  $if(date-meta)$
  <meta name="dcterms.date" content="$date-meta$" />
  $endif$
  $if(keywords)$
  <meta name="keywords" content="$for(keywords)$$keywords$$sep$, $endfor$" />
  $endif$
  $if(description-meta)$
  <meta name="description" content="$description-meta$" />
  $endif$
  $if(template.favicon)$
  <link rel="shortcut icon" href="$template.favicon$">
  $endif$
  <title>$if(title-prefix)$$title-prefix$ â€“ $endif$$pagetitle$</title>
  <!-- Default Pandoc CSS for HTML documents -->
  <style>
    $styles.html()$
  </style>

  <!-- Default values for CSS variables can live here. They can be overridden by
  meta data values. -->
  <link rel="stylesheet" href="$decker-support-dir$/css/variables.css">

  <!-- Transfer meta data values from keys `palette.colors` and `css-variables`
  into a style sheet. Default values can come from `variables.css`. -->
  <style class="css-declarations">
    @media (prefers-color-scheme: light) {
      :root {
        $for(css-light-color-declarations)$ $css-light-color-declarations$ $endfor$
      }

      :root.dark {
        $for(css-dark-color-declarations)$ $css-dark-color-declarations$ $endfor$
      }
    }

    @media (prefers-color-scheme: dark) {
      :root {
        $for(css-dark-color-declarations)$ $css-dark-color-declarations$ $endfor$
      }

      :root.light {
        $for(css-light-color-declarations)$ $css-light-color-declarations$ $endfor$
      }
    }

    :root {
      $for(css-declarations)$ $css-declarations$ $endfor$
    }
  </style>

  <link rel="stylesheet" href="$decker-support-dir$/css/index.css">
  $for(template.css)$
  <link rel="stylesheet" href="$template.css$" />
  $endfor$

  $for(header-includes)$
  $header-includes$
  $endfor$
</head>

<body class="index">
  $for(include-before)$
  $include-before$
  $endfor$
  $if(title)$
  <header id="title-block-header">
    <h1 class="title">$title$</h1>
    $if(subtitle)$
    <p class="subtitle">$subtitle$</p>
    $endif$

    $if(copyright)$
    $copyright:copyright-template.html()$
    $endif$

    $if(author)$
    $author:author-template.html()$
    $endif$

    $if(authors)$
    <div class="authors">
      $for(authors)$
      $it:author-template.html()$
      $endfor$
    </div>
    $endif$
    $if(date)$
    <p class="date">$date$</p>
    $endif$
  </header>
  $endif$

  <main>
    <h2>Search</h2>
    <div id="search-box" class="search">
        <p>
        <i class="fa-solid fa-magnifying-glass"></i>
        <input class="search" placeholder="In Folien suchen" type="text">
        </p>
        <h2 id="searchresultheader">Keine Ergebnisse</h2>
        <table class="search">
        <thead>
            <tr>
            <th>Wort</th>
            <th>Foliensatz</th>
            <th>Folie</th>
            <th>Treffer</th>
            </tr>
        </thead>
        <tbody></tbody>
        </table>
    </div>

    <script type="module">
        import setupSearch from "/$decker-support-dir$/fuzzySearch/search.js";
        window.addEventListener("load", () => {
        let searchBox = document.getElementById("search-box");
        setupSearch(searchBox, 0.5);
        });
    </script>

    <h2>Decks ($decks.by-title/length$)</h2>
    <table>
        <thead>
        <tr>
            <th></th>
            <th>Deck</th>
        </tr>
        </thead>
        <tbody>
        $for(decks.by-title/pairs)$
        <tr>
            <td>$it.key$</td>
            <td>
                <a href="$it.value.url$">$if(it.value.title)$$it.value.title$$else$Unknown Title$endif$$if(it.value.subtitle)$ &mdash; $it.value.subtitle$$endif$</a><br>
                <small><code>$it.value.url$</code></small>
            </td>
        </tr>
        $endfor$
        </tbody>
    </table>

    $if(pages.by-title)$
    <h2>Pages ($pages.by-title/length$)</h2>
    <table>
        <thead>
        <tr>
            <th></th>
            <th>Page</th>
        </tr>
        </thead>
        <tbody>
        $for(pages.by-title/pairs)$
        <tr>
            <td>$it.key$</td>
            <td>
                <a href="$it.value.url$">$if(it.value.title)$$it.value.title$$else$Unknown Title$endif$$if(it.value.subtitle)$ &mdash; $it.value.subtitle$$endif$</a><br>
                <small><code>$it.value.url$</code></small>
            </td>
        </tr>
        $endfor$
        </tbody>
    </table>
    $endif$

    $if(quests.by-title)$
    <h2>Questions ($quests.by-title/length$)</h2>
    <table>
        <thead>
        <tr>
            <th></th>
            <th>Question</th>
        </tr>
        </thead>
        <tbody>
        $for(quests.by-title/pairs)$
        <tr>
            <td>$it.key$</td>
            <td>
                <a href="$it.value.url$">$if(it.value.title)$$it.value.title$$else$Unknown Title$endif$$if(it.value.subtitle)$ &mdash; $it.value.subtitle$$endif$</a>
                <small>($it.value.lecture-id$.$it.value.topic-id$)</small>
                <br>
                <small><code>$it.value.url$</code></small>
            </td>
        </tr>
        $endfor$
        </tbody>
    </table>
    $endif$
  </main>

  $for(include-after)$
  $include-after$
  $endfor$

  <script>
    var socket = new WebSocket("ws://" + location.host + "/reload");
    socket.onmessage = function (event) {
      if (event.data.startsWith("reload!"))
        window.location.reload(true);
    };
  </script>
</body>

</html>
